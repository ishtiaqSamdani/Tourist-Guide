!function(){var t={exports:{}};t.exports,t.exports=function(a){if(a._CTZG&&a._CTZG.bootloader&&!a._CTZG.bootloaderConfig)return{boot:function(){return null}};var s=a._CTZG||{};function u(t,e,n){if(!t)return n;var o=t;if("string"==typeof e&&(e=e.split(".")),!Array.isArray(e))throw new Error("invalid path argument");for(var r=0;r<e.length;r++){if(e.length-r==1&&void 0!==o[e[r]])return o[e[r]];if("object"!=typeof o[e[r]])break;o=o[e[r]]}return n}function c(t){return t&&t.trim&&t.trim()}function l(t){var e={};return t.forEach(function(t){e[t[0]]=t[1]}),e}(a._CTZG=s).bootloader=s.bootloader||{},s.bootloader.version=s.bootloader.version||"db6f06f06aa175d475369a4a865f2aa06fa60d9bc54181a3424d961bbeca0ee0",s.isDebugMode=/CTI_FORCE_DEBUG=1/.test(a.document.cookie),a.CTI_FORCE_DEBUG=function(t){a.document.cookie="CTI_FORCE_DEBUG="+(t?"1":"0"),a.location.reload()},a.CTZ_BAC_FORCE_SESSION_CONFIG=function(t){a.document.cookie="CTZ_BAC_FORCE_SESSION_CONFIG="+t,a.location.reload()},a.CTZ_FORCE_WIDGET=function(t){var e=(e=f("CTZ_FORCE_WIDGET")||"").length?e+","+t:t;a.document.cookie="CTZ_FORCE_WIDGET="+e,a.location.reload()};var t=function(t){return t.reduce(function(t,e){return t.concat(e)},[])},e=function(t){t=a.document.querySelectorAll(t);return Array.prototype.slice.call(t)},I=function(t){return t&&t.split?l(t.split("&").map(function(t){return t.split("=")})):{}};function p(t){switch(typeof t){case"string":return{true:!0,false:!1}[t];case"boolean":return t;default:return Boolean(t)}}function i(){s.isDebugMode&&console.log.apply(null,["[Bootloader]"].concat(arguments))}function d(){s.isDebugMode&&console.error.apply(null,["[Bootloader]"].concat(arguments))}function f(t){t=a.document.cookie.match("(^|;)\\s*"+t+"\\s*=\\s*([^;]+)");return t?t.pop():void 0}function m(t,e){s.bootloader[t]=e}function n(t){return s.bootloader[t]}function o(t,e,n,o){var r=new(a.XMLHttpRequest||a.ActiveXObject)("MSXML2.XMLHTTP.3.0");r.withCredentials=e.withCredentials,r.onload=function(){var t=r.response;"json"===e.responseType&&(t=a.JSON.parse(r.response)),n(t)},r.open(t,e.url,1),r.onreadystatechange=function(){4===r.readyState&&200!==r.status&&o&&o()},r.send(e.payload)}function h(){var t=u(a,"_CTZ.consent",null)||u(a,"_CTZS.consent",null),e=!0;return e=t?Object.prototype.hasOwnProperty.call(t,"allowed")?p(t.allowed):(i("[CTZ] Consent object present but missing properties :: defaulting to false"),!1):e}function b(){return t(["script[src*='//static.clicktripz.com/tag.js']","script[src*='//compare-static'][src*='/tag.js']","script[src*='//localhost:8089/tag.js']","script[src*='//static.clicktripz.com/r/ucb.js']","script[src*='//compare-static'][src*='/ucb.js']","script[src*='//localhost:8088/r/ucb.js']","script[src*='//localhost:8089/r/ucb.js']","script[src*='//localhost:8089/r/ucb.src.js']"].map(e)).filter(function(t){var e=t.getAttribute&&(t.getAttribute("data-alias")||t.getAttribute("data-publisher")),n=RegExp(".*\\.js\\?(.*)"),n=t&&t.src&&n.exec(t.src)&&n.exec(t.src)[1];return I(n).gwi||e})[0]}function g(t){var e=t.src.match("^https?://([^/]+)/.*$"),e=e?e[1]:"static.clicktripz.com",n=/compare-static/.test(e)?e.replace("compare-static","compare"):"www.clicktripz.com";return{hostName:n,apiHostName:/compare-static/.test(e)?e.replace("compare-static","compare"):"api.clicktripz.com",publisherAlias:t.getAttribute("data-alias")||null,publisherHash:t.getAttribute("data-publisher")||null,fpcsEnabled:!/clicktripz\.com/.test(n)}}function r(t,e){var e=t.fpcsEnabled&&!e,n=f("_ctpuid"),o="https://"+t.hostName+"/api/integrations/v1/constrain",r="?";if(null!==t.publisherAlias)r+="publisherAlias="+t.publisherAlias;else{if(null===t.publisherHash)return void d(new Error("Unable to determine constrainURL :: no publisher identifier"));r+="h="+t.publisherHash}return void 0!==n&&(r+="&cpid="+n),e?(s.bootloader.useFPCSCookieSync=!0,t=o+r,t+="&u="+a.location.href,"https://www.clicktripz.com/api/integrations/v1/constrain"+r+"&r="+encodeURIComponent(t)):o+r+"&u="+a.location.href}function C(t,e,n){o("GET",{url:t,responseType:"json",withCredentials:!0},e,n)}function v(e,n){C("https://www.clicktripz.com/api/integrations/v1/constrain",function(){var t=r(e,!1);m("adblockIsEnabled",!1),C(t,function(t){n(t)})},function(){var t=r(e,!0);m("adblockIsEnabled",!0),C(t,function(t){n(t)})})}function y(t,e){C(r(t),function(t){e(t)})}function E(t,e){t.fpcsEnabled?v(t,function(t){e(t)}):y(t,function(t){e(t)})}function w(t,e){o("POST",{url:"https://"+t.apiHostName+"/c11g/v0/a/"+(u(n("constrain"),"data.PublisherMetadataModule.publisherAlias",!1)||t.publisherAlias||t.publisherHash),responseType:"json",withCredentials:!0,payload:JSON.stringify({ClientContext:{userAgent:a.navigator.userAgent,locationPath:a.location.pathname,locationSearch:a.location.search,documentCookie:a.document.cookie},protocol:"1"})},function(t){!t.bootloader&&t.Bootloader&&(t.bootloader=t.Bootloader),e(t)},function(){d("boot sequence terminated: client-config request failure")})}function q(t,n){var o,r,i;o={method:"POST",url:"https://api.clicktripz.com/c11g/v0/gw/"+t["@id"],responseType:"json",withCredentials:!0,body:{ClientContext:{userAgent:a.navigator.userAgent,locationPath:a.location.pathname,locationSearch:a.location.search,cookie:function(t){const e=l(a.document.cookie.split(";").map(c).map(function(e){return function(t){return t&&t.split&&t.split(e)}}("=")));return l(t.map(function(t){return[t,e[t]]}))}(u(t,"clientContext.cookie",[])),dataLayer:function(t){if(!a.dataLayer||!a.dataLayer.slice)return{};var n=a.dataLayer.slice().reverse();return l(t.map(function(e){var t=n.filter(function(t){return u(t,e)})[0];return[e,u(t,e)]}))}(u(t,"clientContext.dataLayer",[]))}}},r=function(t,e){if(t)return d("boot sequence terminated: gateway request failure");n(e)},(i=new(a.XMLHttpRequest||a.ActiveXObject)("MSXML2.XMLHTTP.3.0")).withCredentials=!0,i.onreadystatechange=function(){var t=4===i.readyState,e=200===i.status;if(t)return e?void r(null,JSON.parse(i.responseText)):r(new Error(o.url+" returned status "+i.status))},t=o.body&&JSON.stringify(o.body)||void 0,i.open(o.method,o.url,1),i.send(t)}function T(t){return u(t,["data","userOptedOut"],!1)}O=!(_=function(t){if(u(t,["assessment"],!1))return i("scripts.main not loaded due to assessment: true");t=u(t,["scripts","main"],[]);(Array.isArray(t)?t:[t]).forEach(function(t){N(t,function(t){t&&t.init&&t.init(s)})})});var _,k,O,A=function(){return O?k:(O=!0,k=_.apply(this,arguments))};function S(r,e){function i(t){A(e),t.currentTarget.removeEventListener(t.type,i)}r&&(r.interactionElements||[]).forEach(function(t){var e,n,o=a.document.querySelector(t);p(o)?(e=o,o=r.interactionEvents,n=i,o.forEach(function(t){e.addEventListener(t,n)})):d("Element: "+t+" not found for ensureLoadForInteractionEvents.")})}function j(t){var e,n=t.loadOnAny||[],o=n.filter(function(t){return"number"==typeof t.timeout}),n=n.filter(function(t){return t.interactionElements&&0<t.interactionElements.length&&t.interactionEvents&&0<t.interactionEvents.length});o.length||n.length?(S(n[0],t),n=o[0],e=t,n&&setTimeout(function(){A(e)},n.timeout||0)):A(t)}function L(t,e){function o(e){return u((n=r,Object.keys(n).map(function(t){return[t,n[t]]}).filter(function(t){return t[1].some(function(t){return t==e})})),[0,0]);var n}var r=u(e,"icc.bootloader.scripts.bundles",[]),n=u(e,"icc.bootloader.scripts.mappings",{}),i=u(e,"icc.bootloader.scripts.bundleMappings",{});function a(t){return u(n,t,u(i,[t,"version"]))}var t=!a(c=function t(e){var n=o(e);return n?t(n):e}(t))||s.isDebugMode?t:c,c=a(t);return/^https?:\/\/.*/.test(c)?c:"https://"+u(e,"hostnames.static")+"/asset/"+t+"/"+c+".js"}var M,G,N=function(e,t){if(!t)return d("Module '"+e+"' not loaded. Provide callback to load async from mappings.");try{var n=L(e,s.bootloader);if(!n)throw new Error('No asset found for require("'+e+'")');var o=a.document.createElement("script");o.src=n,o.setAttribute("data-ctz-script-type",e),o.type="text/javascript",o.async=!0,o.onload=function(){try{t(a._ctrequire(e)),i("Successfully loaded module :: "+e)}catch(t){d("Exception thrown from running '"+e+"' module.",t)}},(a.document.body||a.document.getElementsByTagName("head")[0]).appendChild(o)}catch(t){d("Unable to load module '"+e+"' "+t)}};function x(t,e){return N(t,e)}function D(){if(!h())return i("boot sequence terminated: consent.allowed != true");var e;if(a._CTZG.bootloaderConfig)q(e=a._CTZG.bootloaderConfig,function(t){m("clientConfig",t),j(e)});else{var t=b();if(!t)return d("Couldn't find tag.js script element on page. Check for data attributes or 'gwi' query param.");var r=g(t);m("tagData",r),E(r,function(t){var e,n,o;m("constrain",t),n=u(e=t,"data.dmn"),e=u(e,"data.cpid"),(o=/(_ctpuid.*?);/.exec(a.document.cookie))&&1<o.length&&(e=o[1].split("=")[1]),(o=new Date).setDate(o.getDate()+90),a.document.cookie="_ctpuid=; expires=Thu, 01 Jan 1970 00:00:00 UTC;domain="+n+"; path=/;",a.document.cookie="_ctpuid="+e+";expires="+o.toGMTString()+";domain="+n+";path=/;",T(t)?i("boot sequence terminated: userOptedOut != false"):w(r,function(t){m("icc",t),m("ensureModule",x);t=t.bootloader;if(!t)return i("boot sequence terminated: no Bootloader config found");var e=r.fpcsEnabled?{www:r.hostName,static:r.hostName.replace("compare","compare-static"),images:r.hostName.replace("compare","compare-images")}:{www:"www.clicktripz.com",static:"static.clicktripz.com",images:"images.clicktripz.com"};m("hostnames",t.fpcsHostnames||e),j(t)})})}}a._ctrequire=N;try{a._CTZ_RELOAD=(M=h(),G=!1,function(){try{M||G||h()&&(D(),G=!0)}catch(t){d(t)}})}catch(t){d(t)}return{_get:u,coerceBoolean:p,consoleLog:i,consoleError:d,getCookieVal:f,setGlobal:m,getGlobal:n,request:o,ensureUserConsent:h,getTag:b,getTagData:g,determineConstrainUrl:r,callConstrain:C,callConstrainWithCookieSync:v,callConstrainWithoutCookieSync:y,ensureConstrains:E,callIcc:w,userOptedOut:T,loadMain:A,ensureLoadForInteractionEvents:S,ensureLoadForConfiguration:j,ensureModule:x,getUrlForAssetName:L,boot:D}},t.exports(window).boot()}();